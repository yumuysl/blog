import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,f as a,o as e}from"./app-DUJe-SNa.js";const l={};function d(p,s){return e(),n("div",null,[...s[0]||(s[0]=[a(`<h2 id="服务器" tabindex="-1"><a class="header-anchor" href="#服务器"><span>服务器</span></a></h2><h3 id="阿里云购买服务器" tabindex="-1"><a class="header-anchor" href="#阿里云购买服务器"><span>阿里云购买服务器</span></a></h3><ul><li>99元一年：2核2G</li><li>名称：登录阿里云查看</li><li>镜像ID：登录阿里云查看</li><li>地域：华北2（北京）</li><li>创建时间：2024年12月14日 23:49:00</li><li>到期时间：2025年12月14日 23:59:59到期</li><li>SSH远程连接问题：https://help.aliyun.com/zh/ecs/user-guide/ssh-remote-connection-problems/?spm=a2c4g.11186623.0.i2</li></ul><h3 id="服务器配置及运行环境-以centos为例" tabindex="-1"><a class="header-anchor" href="#服务器配置及运行环境-以centos为例"><span>服务器配置及运行环境(以centos为例)</span></a></h3><h4 id="账号及登录配置" tabindex="-1"><a class="header-anchor" href="#账号及登录配置"><span>账号及登录配置</span></a></h4><ul><li>为了安全考虑，得到一台服务器后禁用root登录，禁止密码登录只采用密钥登录</li><li>步骤： <ul><li>新增用户：使用 <code>sudo useradd -m -s /bin/bash newuser</code>命令创建账号，设置用户密码<code>sudo passwd newuser</code></li><li>安装ssh并启动ssh服务：</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openssh-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> openssh-clients</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 安装ssh及其客户端</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sshd</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 启动服务</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sshd</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     # 设置开机自启</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sshd</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     # 检查服务状态</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>生成ssh密钥对</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>ssh-keygen -t rsa -b 4096</span></span>
<span class="line"><span># 后续提示，可以一路回车</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在本地保存好私钥</li><li>切换到普通用户身份（这一步很重要，否则根目录还是root用户的，而后续会禁用root登录）</li><li>将公钥添加到服务器的<code>~/.ssh/authorized_keys</code>文件中 <ul><li>注意：确保<code>.ssh</code>目录的权限是700，<code>.ssh/authorized_keys</code>文件的权限是600</li></ul></li><li>切换到root用户</li><li>修改ssh配置文件 <ul><li>vim打开<code>/etc/ssh/sshd_config</code>文件</li><li>找到下列字段修改</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Port 2222                      # 修改默认端口</span></span>
<span class="line"><span>PermitRootLogin no             # 禁止root直接登录</span></span>
<span class="line"><span>PasswordAuthentication no      # 禁用密码登录（仅密钥，新手可选）</span></span>
<span class="line"><span>AllowUsers your_username       # 只允许特定用户登录（可选）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>重启ssh服务：<code>sudo systemctl restart sshd </code></li><li>修改防火墙或安全组：本人用阿里云服务器，在安全组中修改端口，允许ssh使用2222端口</li><li>在ssh客户端新开窗口测试是否生效</li></ul></li></ul><h4 id="nginx配置" tabindex="-1"><a class="header-anchor" href="#nginx配置"><span>Nginx配置</span></a></h4><ul><li>查看nginx版本：<code>nginx -v</code></li><li>查看nginx的状态：<code>systemctl status nginx</code></li><li>启动nginx：<code>systemctl start nginx</code></li><li>停止nginx：<code>systemctl stop nginx</code></li><li>重启nginx：<code>systemctl restart nginx</code></li><li>配置文件：<code>/etc/nginx/nginx.conf</code></li><li>重新加载配置：<code>sudo systemctl reload nginx</code></li><li>nginx配置基本示例：</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>nginx</span></span>
<span class="line"><span>http {</span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span>        listen 80;  # 监听端口</span></span>
<span class="line"><span>        server_name example.com;  # 你的域名</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        location / {</span></span>
<span class="line"><span>            root /var/www/html;  # 网站根目录</span></span>
<span class="line"><span>            index index.html index.htm;  # 默认首页文件</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        error_page 404 /404.html;  # 自定义404页面</span></span>
<span class="line"><span>        location = /404.html {</span></span>
<span class="line"><span>            internal;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Nginx配置SSL证书：</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>server {</span></span>
<span class="line"><span>    listen       443 ssl;     #证书监听端口</span></span>
<span class="line"><span>   server_name  blog.haysaloe.top;  #域名</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    ssl_certificate /usr/local/nginx/ssl/haysaloe_top.pem;  #证书位置</span></span>
<span class="line"><span>    ssl_certificate_key /usr/local/nginx/ssl/haysaloe_top.key;  #密码路径</span></span>
<span class="line"><span>    ssl_session_cache shared:SSL:1m;</span></span>
<span class="line"><span>    ssl_session_timeout 5m;</span></span>
<span class="line"><span>    ssl_ciphers &#39;ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES128-GCM-SHA256:AEAD-AES256-GCM-SHA384:!MD5:!ADH:!RC4&#39;;  # 证书加密允许协议和禁用的协议</span></span>
<span class="line"><span>    ssl_protocols TLSv1.2 TLSv1.3;  # 指定支持的SSL/TLS协议版本</span></span>
<span class="line"><span>    ssl_prefer_server_ciphers  on;  # 优先选择自身定义的加密算法而非客户端提供的</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    location / {</span></span>
<span class="line"><span>        root  html;</span></span>
<span class="line"><span>        index index.html index.htm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="域名" tabindex="-1"><a class="header-anchor" href="#域名"><span>域名</span></a></h2><h3 id="域名备案" tabindex="-1"><a class="header-anchor" href="#域名备案"><span>域名备案</span></a></h3><ul><li>得到一个域名后，需要进行IP备案，才能使用该域名，包括网站和APP</li><li>阿里云购买的域名在实名认证后进行ICP备案 <ul><li>阿里云备案系统</li><li>不同地区上传材料不同，在阿里云查询所需要的资料后提前准备</li></ul></li></ul><h3 id="域名解析" tabindex="-1"><a class="header-anchor" href="#域名解析"><span>域名解析</span></a></h3><ul><li>域名解析是将域名映射到IP地址的过程，使得用户可以通过域名访问网站或应用。</li><li>一个一级域名可以解析到多个二级域名或多个三级域名，但一个二级域名或三级域名只能解析到一个IP地址。</li></ul><h4 id="dns解析" tabindex="-1"><a class="header-anchor" href="#dns解析"><span>DNS解析</span></a></h4><ul><li>类型：常用的有<code>A</code>、<code>AAAA</code>、<code>CNAME</code>、<code>NS</code>等记录类型，其中<code>A</code>记录指向<code>pv4</code>，<code>AAAA</code>指向<code>ipv6</code>，<code>CNAME</code>指向另一个域名，<code>NS</code>指向<code>DNS</code></li><li>名称：通常值得是子域名名称，如<code>www.baidu.com</code>，这里的名称为<code>www</code>，但当名称为@时指向根域名，即<code>baidu.com</code></li><li>内容：真实的IP地址</li></ul>`,18)])])}const h=i(l,[["render",d]]),r=JSON.parse('{"path":"/notes/endnotes/domain/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%9F%E5%90%8D%E7%AC%94%E8%AE%B0.html","title":"服务器域名笔记","lang":"zh-CN","frontmatter":{"title":"服务器域名笔记","date":"2024-12-15T00:00:00.000Z","description":"服务器、域名及部署相关笔记","article":false,"feed":false,"seo":false,"head":[]},"git":{"createdTime":1739065138000,"updatedTime":1739065138000,"contributors":[{"name":"bestoaloe","username":"","email":"yinchuanyjw@outlook.com","commits":1}]},"readingTime":{"minutes":3.17,"words":951},"filePathRelative":"notes/endnotes/domain/服务器域名笔记.md"}');export{h as comp,r as data};
