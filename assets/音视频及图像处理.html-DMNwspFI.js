import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,f as e,o as l}from"./app-2cjhSLcQ.js";const n={};function t(p,i){return l(),s("div",null,[...i[0]||(i[0]=[e(`<h2 id="音视频" tabindex="-1"><a class="header-anchor" href="#音视频"><span>音视频</span></a></h2><h3 id="基础字段概念" tabindex="-1"><a class="header-anchor" href="#基础字段概念"><span>基础字段概念</span></a></h3><h4 id="编码、采样、码率、帧率、分辨率、声道等基础概念" tabindex="-1"><a class="header-anchor" href="#编码、采样、码率、帧率、分辨率、声道等基础概念"><span>编码、采样、码率、帧率、分辨率、声道等基础概念</span></a></h4><ul><li><strong>编码</strong>：音视频编码是指将原始的音视频数据通过特定的算法转换成可以存储或传输的格式。常见的视频编码格式有H.264、H.265、VP9、AV1等，音频编码格式有MP3、AAC、FLAC、WAV（未经过压缩）等</li><li><strong>采样</strong>：音频采样是指将模拟音频信号转换成数字音频信号的过程。采样频率是指每秒采样的次数，单位为赫兹（Hz）。常见的采样频率有44.1kHz、48kHz等。</li><li><strong>码率</strong>：码率是指单位时间内传输的数据量，通常用比特每秒（bps）表示。码率越高，音视频的质量越好，但同时文件大小也会越大。</li><li><strong>帧率</strong>：帧率是指视频中每秒显示的帧数，单位为帧每秒（fps）。帧率越高，视频的流畅度越好，但同时码率也会越大。常见的帧率有24fps、30fps、60fps等。</li><li><strong>分辨率</strong>：分辨率是指视频图像的大小，通常用像素数表示。分辨率越高，视频的清晰度越好，但同时码率也会越大。常见的分辨率有720p、1080p、4K、8K等。</li><li><strong>声道</strong>：声道是指音频信号中的通道数。常见的声道有单声道（Mono）、立体声（Stereo）、5.1声道、7.1声道等。声道数越多，音频的立体感和空间感越好。</li><li><strong>帧率模式（Frame Rate Mode）</strong>：视频的帧率模式可以是固定帧率（CFR）或可变帧率（VFR）。CFR模式下，视频的帧率是恒定的；而VFR模式下，视频的帧率可以根据场景的复杂程度变化。</li><li><strong>扫描模式（Scan Mode）</strong>：视频的扫描模式可以是逐行扫描（Progressive Scan）或隔行扫描（Interlaced Scan）。逐行扫描通常用于数字视频，而隔行扫描则常用于模拟电视信号。</li></ul><h4 id="如何查看某个视频音频的这些基础信息" tabindex="-1"><a class="header-anchor" href="#如何查看某个视频音频的这些基础信息"><span>如何查看某个视频音频的这些基础信息</span></a></h4><ul><li>mediaInfo、FFmpeg工具的使用和分析</li><li>可以使用potPlayer播放器查看视频属性获取视频基础信息</li></ul><h3 id="使用ffmpeg处理音视频" tabindex="-1"><a class="header-anchor" href="#使用ffmpeg处理音视频"><span>使用ffmpeg处理音视频</span></a></h3><h4 id="安装ffmpeg-win11系统" tabindex="-1"><a class="header-anchor" href="#安装ffmpeg-win11系统"><span>安装ffmpeg（win11系统）</span></a></h4><ul><li>github下载编译好的版本<code>ffmpeg-master-latest-win64-gpl.zip</code></li><li>解压到目标目录</li><li>找到对应的bin文件夹，添加到环境变量，如<code>D:\\ffmpeg-master-win64-gpl\\bin</code></li><li>验证：打开终端输入<code>ffmpeg -version</code></li></ul><h4 id="基础命令结构" tabindex="-1"><a class="header-anchor" href="#基础命令结构"><span>基础命令结构</span></a></h4><ul><li><code>ffmpeg [全局选项] -i 输入文件 [输入选项] [输出选项] 输出文件</code></li></ul><h4 id="使用ffmpeg查看音视频文件元数据" tabindex="-1"><a class="header-anchor" href="#使用ffmpeg查看音视频文件元数据"><span>使用ffmpeg查看音视频文件元数据</span></a></h4><ul><li>基础：<code>ffprobe input.mp4</code></li><li>详细：<code>ffprobe -hide_banner -i input.mp4</code></li><li>JSON格式：<code>ffprobe -v quiet -print_format json -show_format -show_streams input.mp4</code></li></ul><h4 id="格式转换" tabindex="-1"><a class="header-anchor" href="#格式转换"><span>格式转换</span></a></h4><ul><li>通用转码：<code>ffmpeg -i input.mp4 output.avi</code></li><li>指定编码格式：<code>ffmpeg -i input.mp4 -c:v libx264 -c:a aac output.mp4</code><ul><li>c:v：视频编码器（如 libx264, libx265, libvpx-vp9）</li><li>c:a：音频编码器（如 aac, libmp3lame, opus） -复制流（无转码）：<code>ffmpeg -i input.mp4 -c:v copy -c:a copy output.mkv</code></li><li>直接复制音视频流，适用于容器格式转换。</li></ul></li></ul><h4 id="提取视频封面图" tabindex="-1"><a class="header-anchor" href="#提取视频封面图"><span>提取视频封面图</span></a></h4><ul><li><code>ffmpeg -i input.mp3 -an -vcodec copy cover.jpg</code></li></ul><h4 id="压缩视频文件大小" tabindex="-1"><a class="header-anchor" href="#压缩视频文件大小"><span>压缩视频文件大小</span></a></h4><ul><li><code>ffmpeg -i input.mp4 -c:v libx265 -crf 28 -c:a aac -b:a 128k output.mp4</code><ul><li>crf 28：质量参数（0-51，值越小质量越高，建议 18-28）。</li><li>c:a aac：音频编码为 AAC。</li><li>b:a 128k：音频比特率。</li></ul></li></ul><h4 id="截取视频片段" tabindex="-1"><a class="header-anchor" href="#截取视频片段"><span>截取视频片段</span></a></h4><ul><li><code>ffmpeg -i input.mp4 -ss 00:01:00 -t 10 output.mp4</code><ul><li>ss：开始时间</li><li>t：持续时间（秒或 HH:MM:SS）</li></ul></li></ul><h4 id="添加水印" tabindex="-1"><a class="header-anchor" href="#添加水印"><span>添加水印</span></a></h4><ul><li><code>ffmpeg -i input.mp4 -i logo.png -filter_complex &quot;overlay=10:10&quot; output.mp4</code><ul><li>overlay=10:10：水印位于左上角（坐标 X=10, Y=10)</li></ul></li></ul><h4 id="裁剪视频区域" tabindex="-1"><a class="header-anchor" href="#裁剪视频区域"><span>裁剪视频区域</span></a></h4><ul><li><code>ffmpeg -i input.mp4 -vf &quot;crop=640:360:100:50&quot; output.mp4</code><ul><li>crop=宽:高:起始X:起始Y：从原视频中裁剪指定区域。</li></ul></li></ul><h4 id="视频转gif" tabindex="-1"><a class="header-anchor" href="#视频转gif"><span>视频转GIF</span></a></h4><ul><li><code>ffmpeg -i input.mp4 -vf &quot;fps=10,scale=320:-1&quot; output.gif</code></li></ul><h4 id="提取视频帧为图片" tabindex="-1"><a class="header-anchor" href="#提取视频帧为图片"><span>提取视频帧为图片</span></a></h4><ul><li><code>ffmpeg -i input.mp4 -r 1 -f image2 image-%03d.jpg</code><ul><li>会将视频所有帧转为图片</li></ul></li></ul><h4 id="合并多个视频" tabindex="-1"><a class="header-anchor" href="#合并多个视频"><span>合并多个视频</span></a></h4><ul><li><code>ffmpeg -f concat -i filelist.txt -c copy output.mp4</code><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># filelist.txt 内容示例：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;input1.mp4&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;input2.mp4&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="去除音频" tabindex="-1"><a class="header-anchor" href="#去除音频"><span>去除音频</span></a></h4><ul><li><code>ffmpeg -i input.mp4 -an output.mp4</code></li></ul><h4 id="压缩音频文件大小" tabindex="-1"><a class="header-anchor" href="#压缩音频文件大小"><span>压缩音频文件大小</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 转为 MP3，比特率 96k，单声道</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ffmpeg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> input.wav</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c:a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> libmp3lame</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b:a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 96k</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ac</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> output.mp3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 转为 AAC，比特率 64k（适合语音）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ffmpeg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> input.wav</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c:a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aac</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b:a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 64k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> output.m4a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 降低采样率到 32kHz</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ffmpeg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> input.wav</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 32000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> output.wav</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="提取音频" tabindex="-1"><a class="header-anchor" href="#提取音频"><span>提取音频</span></a></h4><ul><li><code>ffmpeg -i input.mp4 -vn -c:a copy output.aac</code><ul><li>vn：忽略视频流</li></ul></li></ul><h4 id="常见全局选项" tabindex="-1"><a class="header-anchor" href="#常见全局选项"><span>常见全局选项</span></a></h4><ul><li><code>-y</code>：覆盖输出文件（无需确认）</li><li><code>-hide_banner</code>： 隐藏 FFmpeg 版本信息</li><li><code>-loglevel error</code>：仅显示错误日志</li><li><code>-threads 4</code>：指定线程数（加速处理）</li></ul><h4 id="查看支持的解码器与格式" tabindex="-1"><a class="header-anchor" href="#查看支持的解码器与格式"><span>查看支持的解码器与格式</span></a></h4><ul><li>查看所有编解码器：<code>ffmpeg -codecs</code></li><li>查看支持的容器格式：<code>ffmpeg -formats</code></li><li>查看可用编码器：<code>ffmpeg -encoders</code></li></ul><h3 id="处理图片" tabindex="-1"><a class="header-anchor" href="#处理图片"><span>处理图片</span></a></h3><ul><li>使用命令行工具：ImageMagick</li><li>使用PS</li></ul>`,43)])])}const r=a(n,[["render",t]]),c=JSON.parse('{"path":"/notes/frontnotes/other/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8F%8A%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.html","title":"音视频及图像处理","lang":"zh-CN","frontmatter":{"title":"音视频及图像处理","tag":"前端笔记","date":"2025-05-10T00:00:00.000Z","description":"音视频及图像等基础和进阶笔记","article":false,"feed":false,"seo":false,"head":[]},"git":{"createdTime":1756821233000,"updatedTime":1756821233000,"contributors":[{"name":"yumuysl","username":"","email":"yinchuanyjw@outlook.com","commits":1}]},"readingTime":{"minutes":4.05,"words":1215},"filePathRelative":"notes/frontnotes/other/音视频及图像处理.md"}');export{r as comp,c as data};
