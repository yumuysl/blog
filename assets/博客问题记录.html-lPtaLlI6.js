import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,f as a,o as n}from"./app-CkvgXyJu.js";const l={};function t(h,s){return n(),e("div",null,[...s[0]||(s[0]=[a(`<h2 id="执行pnpm-docs-dev失败" tabindex="-1"><a class="header-anchor" href="#执行pnpm-docs-dev失败"><span><code>执行pnpm docs:dev</code>失败</span></a></h2><h3 id="问题详情" tabindex="-1"><a class="header-anchor" href="#问题详情"><span>问题详情</span></a></h3><p>执行命令<code>pnpm docs:dev</code>出现如下异常：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>error TypeError: crypto.hash is not a function</span></span>
<span class="line"><span>    at getHash (file:///F:/record/bestoaloesource/node_modules/.pnpm/vite@7.0.6_@types+node@24.3_d371edf549dd4f63532efb449b61da99/node_modules/vite/dist/node/chunks/dep-BHkUv4Z8.js:2788:21)</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>ELIFECYCLE  Command failed with exit code 1.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="问题原因" tabindex="-1"><a class="header-anchor" href="#问题原因"><span>问题原因：</span></a></h3><p>通过上述error信息中可以看出是node版本的问题，当前版本是20.11.0，不支持crypto.hash函数</p><h3 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h3><ul><li>通过nvm安装支持crypto.hash函数的版本，如22.17.0，安装后切换到该版本，查看是否支持pnpm，如果以前没有配置过，需要重新配置pnpm等全局库的安装路径，安装pnpm</li><li>上述无误后，重新运行<code>pnpm docs:dev</code></li></ul><h2 id="网站更新-2025-8-29" tabindex="-1"><a class="header-anchor" href="#网站更新-2025-8-29"><span>网站更新：2025-8-29</span></a></h2><p>vuepress版本已经进入rc阶段，可以作为稳定版，重新启动在线个人博客</p><h2 id="网站更新-2024-7-1" tabindex="-1"><a class="header-anchor" href="#网站更新-2024-7-1"><span>网站更新 2024.7.1</span></a></h2><ul><li>取消在线网站，只在本地作为笔记库，为什么这样做？ <ul><li>内容自己并不满意，同时精力上不允许自己频繁搞配置维护</li><li>作为网站可以在手机上看自己的笔记，但实际上手机并不适合我作为学习的主要工具，打开电脑更容易进入学习状态</li></ul></li></ul><h2 id="网站更新-2024-2-25" tabindex="-1"><a class="header-anchor" href="#网站更新-2024-2-25"><span>网站更新 2024.2.25</span></a></h2><ol><li><p>改善网站导航内容 为什么这么做：网站原有的导航定义比较模糊，同时也有很多文章属于个人学习笔记，不能为了文章数量而粗制乱造，所以去除了该模块内容</p></li><li><p>升级主题版本</p></li></ol><h2 id="更新软件包-2023-10-1" tabindex="-1"><a class="header-anchor" href="#更新软件包-2023-10-1"><span>更新软件包 2023.10.1</span></a></h2><h3 id="发生了什么" tabindex="-1"><a class="header-anchor" href="#发生了什么"><span>发生了什么</span></a></h3><p>当使用 pnpm update 更新主题包时发现包版本一直未动，显示如下信息：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Falling back to copying packages from store</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="如何解决" tabindex="-1"><a class="header-anchor" href="#如何解决"><span>如何解决</span></a></h3><p>卸了vuepress和主题包，到官网查看最新版本，使用pnpm add -D根据版本安装，同时vue依赖发生错误，卸了重新安装。</p><h2 id="vuepress在gitee上搭建博客的bug" tabindex="-1"><a class="header-anchor" href="#vuepress在gitee上搭建博客的bug"><span>vuepress在gitee上搭建博客的bug</span></a></h2><h3 id="一-、node-js版本问题" tabindex="-1"><a class="header-anchor" href="#一-、node-js版本问题"><span>（一）、node.js版本问题</span></a></h3><p>Q：由于node.js版本有稳定版（）和流行版（），导致将vuepress安装配置完后运行出问题，问题如下：</p><p><img src="https://notesreord.oss-cn-beijing.aliyuncs.com/code/前端bug - bug记录 - node版本.jpg?x-oss-code-xxx" alt="vuepress" loading="lazy"></p><p>A：此问题出现时以为是端口被占用了或者是环境变量path路径没设置，然后用netstat查看后发现端口空闲，vuepress安装也不是全局安装不用设置环境变量，后来搜索一圈儿后发现是node.js的版本不是稳定版，之后用nvm换成稳定版后成功运行。</p><h3 id="二-、git推送到gitee时push失败" tabindex="-1"><a class="header-anchor" href="#二-、git推送到gitee时push失败"><span>（二）、git推送到gitee时push失败</span></a></h3><p>Q：把vuepress打包且git初始化后，将dist内的文件上传到gitee上时，发现push一直失败，问题如下：</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">rejected master -&gt; master (fetch first) error: failed to push some refs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>A：遇到这个问题时，猜想是远程仓库不匹配：通过remote发现远程仓库正确，排除。想了一会儿，突然想起gitee上新建的仓库没有公开，设置公开后问题依旧没解决，搜索问题发现初始化git后需要先pull，后push，如下:</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">git pull --rebase origin master</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//如果pull后发生文件内容冲突，手动解决冲突后，运行</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//git add .</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//git rebase --continue</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//rebase 成功后运行下面的push</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">git push -u origin master</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>虽然过程看起来比较曲折，但问题依旧没有解决，再次通过搜索发现ssh没有设置正确，重新生成公钥后配置到gitee，之后运行git push -u origin master成功上传。</p><h3 id="三-打包时node内存溢出" tabindex="-1"><a class="header-anchor" href="#三-打包时node内存溢出"><span>（三）打包时node内存溢出</span></a></h3><p>Q：编译vuepress时编译失败，出现如下错误信息</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>FATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>A：主要意思是v8有堆内存限制（js单线程），所以编译失败，解决方法主要发现两个，第一个是查看是哪块代码出现内存溢出，做优化防止内存泄漏，第二个是增大限制的堆内存，此处采用第二种方法，如下：</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-js"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//全局安装increase-memory-limit包</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">pnpm</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">g</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> increase</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">memory</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">limit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//完成后，允许这个包</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">increase</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">memory</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">limit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四-启动项目编译失败" tabindex="-1"><a class="header-anchor" href="#四-启动项目编译失败"><span>（四）启动项目编译失败</span></a></h3><ol><li>显示：</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Error: listen EACCES 0.0.0.0:8080</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其实就是8080端口被占用了 2. 如何处理</p><ul><li>排查是否为端口被占用，打开终端cmd输入：netstat -ano | findstr 8080，若有记录根据pid在系统进程中找到该进程</li><li>如果上述没有记录，应该是系统中的某个进程被隐藏，尤其在win11中调整了动态端口范围，powershell中输入netsh int ipv4 show dynamicport tcp查看端口范围</li><li>如果8080端口在此范围，需要设置新范围，输入：netsh int ipv4 set dynamicport tcp start=10000 num=1000</li><li>备忘：需要查看windows官网，https://learn.microsoft.com/zh-cn/troubleshoot/windows-client/networking/tcp-ip-port-exhaustion-troubleshooting</li></ul>`,41)])])}const p=i(l,[["render",t]]),o=JSON.parse('{"path":"/notes/plan/website/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95.html","title":"网站问题记录","lang":"zh-CN","frontmatter":{"title":"网站问题记录","date":"2025-08-28T00:00:00.000Z","description":"记录网站在制作、维护过程中的各种问题","article":false,"feed":false,"seo":false,"head":[]},"git":{"createdTime":1681123689000,"updatedTime":1757521032000,"contributors":[{"name":"bestoAloe","username":"","email":"286258752@qq.com","commits":47},{"name":"bestoaloe","username":"","email":"yinchuanyjw@outlook.com","commits":7},{"name":"yumuysl","username":"","email":"yinchuanyjw@outlook.com","commits":2}]},"readingTime":{"minutes":4.11,"words":1234},"filePathRelative":"notes/plan/website/博客问题记录.md"}');export{p as comp,o as data};
